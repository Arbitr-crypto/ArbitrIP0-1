diff --git a/requirements.txt b/requirements.txt
index 1234567..abcdef0 100644
--- a/requirements.txt
+++ b/requirements.txt
@@ -1,3 +1,4 @@
-python-telegram-bot==20.3
+python-telegram-bot[job-queue]==20.3
 ccxt==4.5.22
 pandas==2.3.3
diff --git a/bot.py b/bot.py
index 1111111..2222222 100644
--- a/bot.py
+++ b/bot.py
@@ -250,6 +250,32 @@ async def main():

     app = ApplicationBuilder().token(TELEGRAM_TOKEN).build()

+    # --- FIX JOB QUEUE NOT INITIALIZED ---
+    # PTB sometimes creates app.job_queue as None unless job-queue extra is installed.
+    # Railway sometimes isolates dependencies too. This ensures job_queue always works.
+
+    if app.job_queue is None:
+        try:
+            from telegram.ext import JobQueue
+            job_queue = JobQueue()
+            job_queue.set_application(app)
+            job_queue.start()
+            app.job_queue = job_queue
+            print("JobQueue was None â†’ Created manually.")
+        except Exception as e:
+            print("Failed to create JobQueue:", e)
+            raise
+
+    job_queue = app.job_queue
+
+    # Repeating background scanner job
+    job_queue.run_repeating(
+        scanner_job,
+        interval=CHECK_INTERVAL,
+        first=5
+    )
+
+
     # --- RUN BOT ---
-    await app.run_polling()
+    # run_polling already handles async internally. No asyncio.run around main.
+    await app.initialize()
+    await app.start()
+    await app.updater.start_polling()
+    await app.stop()
diff --git a/bot.py b/bot.py
index 2222222..3333333 100644
--- a/bot.py
+++ b/bot.py
@@ -280,8 +305,6 @@ if __name__ == "__main__":
-    # Old incorrect event-loop call:
-    asyncio.run(main())
+    # Correct PTB v20+ entrypoint
+    import asyncio
+    asyncio.run(main())
